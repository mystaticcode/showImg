(function(){"use strict";const EvanHotRanking=function(options){if(!(this instanceof EvanHotRanking)){return new EvanHotRanking(options)}this.options=Object.assign({},{title:"热搜榜",list:[],api:null,size:10,format:null,more:{use:true,text:"点击查看完整热搜榜",link:"https://b.925i.cn",},},options);this.init()};EvanHotRanking.prototype={dom:{container:null,content:null,title:null,refresh:null,},fnGetDom(){this.dom.container=$(".joe_aside__item.hot-ranking");this.dom.content=$(".joe_aside__item.hot-ranking").find(".content");this.dom.title=this.dom.container.find(".text");this.dom.refresh=this.dom.container.find(".refresh")},timer:null,data:{title:"标题加载中...",list:[],},fnGetTempHtml(type){switch(type){case"loading":let _loadingHtml=`<div class="hot-ranking_loading">${this.options.loadingText||"加载中，请稍等..."}</div>`;return _loadingHtml;case"empty":let _emptyHtml=`<div class="hot-ranking_empty">${this.options.emptyText||"啊偶，没有数据！"}</div>`;return _emptyHtml}},fnRenderHtml(){let _maxSize=Number(this.options.size);_maxSize=isNaN(_maxSize)?10:_maxSize;const _list=this.data.list;if(_list.length==0){this.dom.content.html(this.fnGetTempHtml("empty"));return}let _listItemHtml="";for(let index=0;index<_list.length;index++){if(index>=_maxSize)break;const item=_list[index];let _hotTip="";if(index<3){_hotTip=`<span class="hot-ranking_hot hot-ranking_hot-${
              item.index + 1
            }">热</span>`}else{_hotTip=`<span class="hot-ranking_new">新</span>`}_listItemHtml+=`<li class="hot-ranking-list_item"><a href="${item.link}"target="_blank"title="${item.title}"><span class="hot-ranking_order hot-ranking_order-${
                  index + 1
                }">${index+1}</span><span class="hot-ranking_text"><span class="hot-ranking_title">${item.title}</span><span class="hot-ranking_number">${item.hot}</span></span>${_hotTip}</a></li>`}this.dom.content.html(`<ul class="hot-ranking-list">${_listItemHtml}</ul>`);this.fnAddMore();this.dom.title.text(this.data.title);this.fnOnRefresh()},fnAddMore(){const _this=this;if(_this.options.more.use){let _moreHtml=`<a class="hot-ranking-more"href="${_this.options.more.link}"target="_blank"title="${_this.options.more.text}">${_this.options.more.text}</a>`;this.dom.content.append(_moreHtml)}},fnOnRefresh(){const _this=this;this.dom.refresh.off("click").click(function(){if(_this.options.api){_this.dom.content.html(_this.fnGetTempHtml("loading"));_this.fnGetData()}else{console.warn("HotRanking：当前未使用API接口请求数据，无法对数据进行刷新！")}})},fnGetData(){const _this=this;$.get(this.options.api,{},function(res){if(typeof _this.options.format=="function"){_this.data=_this.options.format(res)}else{_this.data.title=res.hot_name;_this.data.list=res.hot_rank}_this.data.title=_this.data.title||_this.options.title||"热搜榜";_this.fnRenderHtml()})},init(){const _this=this;$(function(){_this.fnGetDom();if(!document.querySelector(".joe_aside__item.hot-ranking"))return;if(_this.options.api){_this.fnGetData()}else{_this.data.title=_this.options.title||"热搜榜";_this.data.list=_this.options.list;_this.fnRenderHtml()}})},};window.EvanHotRanking=EvanHotRanking})();